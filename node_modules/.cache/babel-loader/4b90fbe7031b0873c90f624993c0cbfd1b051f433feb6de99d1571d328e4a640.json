{"ast":null,"code":"import { duplicate } from '../../util';\nimport { expression } from '../predicate';\nimport { DataFlowNode } from './dataflow';\nimport { getDependentFields } from './expressions';\nexport class FilterNode extends DataFlowNode {\n  clone() {\n    return new FilterNode(null, this.model, duplicate(this.filter));\n  }\n  constructor(parent, model, filter) {\n    super(parent);\n    this.model = model;\n    this.filter = filter;\n    // TODO: refactor this to not take a node and\n    // then add a static function makeFromOperand and make the constructor take only an expression\n    this.expr = expression(this.model, this.filter, this);\n    this._dependentFields = getDependentFields(this.expr);\n  }\n  dependentFields() {\n    return this._dependentFields;\n  }\n  producedFields() {\n    return new Set(); // filter does not produce any new fields\n  }\n\n  assemble() {\n    return {\n      type: 'filter',\n      expr: this.expr\n    };\n  }\n  hash() {\n    return `Filter ${this.expr}`;\n  }\n}","map":{"version":3,"mappings":"AAGA,SAAQA,SAAS,QAAO,YAAY;AAEpC,SAAQC,UAAU,QAAO,cAAc;AACvC,SAAQC,YAAY,QAAO,YAAY;AACvC,SAAQC,kBAAkB,QAAO,eAAe;AAEhD,OAAM,MAAOC,UAAW,SAAQF,YAAY;EAGnCG,KAAK;IACV,OAAO,IAAID,UAAU,CAAC,IAAI,EAAE,IAAI,CAACE,KAAK,EAAEN,SAAS,CAAC,IAAI,CAACO,MAAM,CAAC,CAAC;EACjE;EAEAC,YACEC,MAAoB,EACHH,KAAY,EACZC,MAAqC;IAEtD,KAAK,CAACE,MAAM,CAAC;IAHI,UAAK,GAALH,KAAK;IACL,WAAM,GAANC,MAAM;IAIvB;IACA;IACA,IAAI,CAACG,IAAI,GAAGT,UAAU,CAAC,IAAI,CAACK,KAAK,EAAE,IAAI,CAACC,MAAM,EAAE,IAAI,CAAC;IAErD,IAAI,CAACI,gBAAgB,GAAGR,kBAAkB,CAAC,IAAI,CAACO,IAAI,CAAC;EACvD;EAEOE,eAAe;IACpB,OAAO,IAAI,CAACD,gBAAgB;EAC9B;EAEOE,cAAc;IACnB,OAAO,IAAIC,GAAG,EAAU,CAAC,CAAC;EAC5B;;EAEOC,QAAQ;IACb,OAAO;MACLC,IAAI,EAAE,QAAQ;MACdN,IAAI,EAAE,IAAI,CAACA;KACZ;EACH;EAEOO,IAAI;IACT,OAAO,UAAU,IAAI,CAACP,IAAI,EAAE;EAC9B","names":["duplicate","expression","DataFlowNode","getDependentFields","FilterNode","clone","model","filter","constructor","parent","expr","_dependentFields","dependentFields","producedFields","Set","assemble","type","hash"],"sourceRoot":"","sources":["../../../../src/compile/data/filter.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}